CREATE TABLE PERMISSAO (
    ID_PERMISSAO INTEGER PRIMARY KEY,
    PERMISSAO VARCHAR(100)
);

CREATE TABLE USUARIO (
    LOGIN VARCHAR(100) PRIMARY KEY,
    NOME VARCHAR(100),
    EMAIL VARCHAR(100) UNIQUE,
    SENHA VARCHAR(100),
    ID_PERMISSAO INTEGER,
    DATA_REGISTRO TIMESTAMP DEFAULT SYSDATE,
    FOREIGN KEY (ID_PERMISSAO) REFERENCES PERMISSAO (ID_PERMISSAO)
);


CREATE TABLE CHASSI(
    ID_CHASSI INTEGER PRIMARY KEY,
    PROPRIETARIO VARCHAR (100),
    DATA_REGISTRO TIMESTAMP DEFAULT SYSDATE,
    FOREIGN KEY (PROPRIETARIO) REFERENCES USUARIO (LOGIN)
);

CREATE TABLE BOLETIM_SERVICO(
    ID_BOLETIM VARCHAR(50) PRIMARY KEY,
    DESCRICAO VARCHAR(100),
    DATA_REGISTRO TIMESTAMP DEFAULT SYSDATE
);

CREATE TABLE ITEM(
    ID_ITEM INTEGER PRIMARY KEY,
    NOME VARCHAR(100),
    CATEGORIA VARCHAR(100),
    DATA_REGISTRO TIMESTAMP DEFAULT SYSDATE
);

CREATE TABLE LOGICA_BOLETIM(
    ID_LOGICA INTEGER PRIMARY KEY,
    INPUT1 VARCHAR(50),
    OPERACAO CHAR (3),
    INPUT2 VARCHAR(50),
    DEPENDENCIA INTEGER,
    ID_ITEM INTEGER,
    DATA_REGISTRO TIMESTAMP DEFAULT SYSDATE,
    FOREIGN KEY (INPUT1) REFERENCES BOLETIM_SERVICO (ID_BOLETIM),
    FOREIGN KEY (INPUT2) REFERENCES BOLETIM_SERVICO (ID_BOLETIM),
    FOREIGN KEY (DEPENDENCIA) REFERENCES LOGICA_BOLETIM (ID_LOGICA),
    FOREIGN KEY (ID_ITEM) REFERENCES ITEM (ID_ITEM)
);

CREATE TABLE LOGICA_FABRICA(
    ID_LOGICA INTEGER PRIMARY KEY,
    ID_ITEM INTEGER,
    CHASSI_MINIMO VARCHAR(50),
    DATA_REGISTRO TIMESTAMP DEFAULT SYSDATE,
    FOREIGN KEY (ID_ITEM) REFERENCES ITEM (ID_ITEM)
);

CREATE TABLE CHASSI_BOLETIM(
    ID_CHASSI INTEGER,
    ID_BOLETIM VARCHAR(50),
    STATUS VARCHAR(50),
    DATA_REGISTRO TIMESTAMP DEFAULT SYSDATE,
    MODIFICADO_POR VARCHAR(100),
    PRIMARY KEY (ID_CHASSI, ID_BOLETIM),
    FOREIGN KEY (ID_CHASSI) REFERENCES CHASSI (ID_CHASSI),
    FOREIGN KEY (ID_BOLETIM) REFERENCES BOLETIM_SERVICO (ID_BOLETIM),
    FOREIGN KEY (MODIFICADO_POR) REFERENCES USUARIO (LOGIN)
);

CREATE TABLE CHASSI_ITEM(
    ID_CHASSI INTEGER,
    ID_ITEM INTEGER,
    INSTALADO NUMERIC(1),
    DATA_INSTALACAO TIMESTAMP DEFAULT SYSDATE,
    PRIMARY KEY (ID_CHASSI, ID_ITEM),
    FOREIGN KEY (ID_CHASSI) REFERENCES CHASSI (ID_CHASSI),
    FOREIGN KEY (ID_ITEM) REFERENCES ITEM (ID_ITEM)
);

CREATE TABLE CHASSI_BOLETIM_AUDIT(
    ID_AUDITORIA INTEGER PRIMARY KEY,
    ID_CHASSI INTEGER,
    ID_BOLETIM VARCHAR(50),
    STATUS_ANTERIOR VARCHAR(50),
    STATUS_NOVO VARCHAR(50),
    DATA_MODIFICACAO TIMESTAMP DEFAULT SYSDATE,
    ID_USUARIO INTEGER
);
